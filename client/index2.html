<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>Client</title>
  </head>
  <body>

    <div class="container">
        <div class="row heading">
            <div class="col-2"></div>
            <div class="col-8" text-align="center"><h3>This is a SAVS Client</h3></div>
            <div class="col-2"></div>
        </div>
        <div class="row login">
            <div class="col-2"></div>
            <div class="col-3"></div>
            <div class="col-5" id="login-form" text-align="center">
                <div class="input-group mb-3">
                    <meta name="google-signin-client_id" content="xxxx.apps.googleusercontent.com">
                    <div class="input-group-append">
                        <div class="g-signin2" data-onsuccess="onSignIn"
                        data-cookiepolicy="single_host_origin"
                        data-scope="https://www.googleapis.com/auth/userinfo.email"
                        data-clientid="xxxx.apps.googleusercontent.com">

                        </div>
                    </div>
                  </div>
            </div>
            <div class="col-2"></div>
        </div>
        <div class="row" id="information-container" style="display:none;">
            <div class="col-12">
                <div class="row">
                    <div class="col-6" text-align="center">
                        <h5>Clubs</h5>
                        <div class="club-by-id-container">
                            <div class="row">
                                <div class="col-12">
                                    <div class="input-group mb-3">
                                        <input type="text" class="form-control" id="club-id" placeholder="Club ID" aria-label="Club ID" aria-describedby="basic-addon2">
                                        <div class="input-group-append">
                                            <button class="btn btn-primary" type="button" onclick="get_club_by_id(document.getElementById('club-id').value)">Search</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" id="club-id-found" style="display:none;">
                                <div class="col-12">
                                    <div class="row" id="club-id-found-id">
                                    </div>
                                    <div class="row" id="club-id-found-name">
                                    </div>
                                    <div class="row" id="club-id-found-head">
                                    </div>
                                    <div class="row" id="club-id-found-category">
                                    </div>
                                    <div class="row" id="club-id-found-description">
                                    </div>
                                </div>
                            </div>
                            <div class="row" id="club-id-not-found" style="display:none;">
                                <div class="col-12">
                                    Club not found
                                </div>
                            </div>
                        </div>
                        <div class="row create-club-container">
                            <div class="col-12" text-align="center">
                                <h5>Create Club</h5>
                                <div class="create-club">
                                        <div class="form-group">
                                            <input type="text" class="form-control" id="create-club-name" placeholder="Enter club name">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" id="create-club-head" placeholder="Enter club head id">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" id="create-club-category" placeholder="Enter club category">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" id="create-club-description" placeholder="Enter club description">
                                        </div>
                                        <button type="submit" class="btn btn-primary" onclick="create_club()">Create Club</button>
                                        <div id="create-club-response" style="display:none;"></div>
                                </div>
                            </div>
                        </div><br>
                        <div class="row get-all-clubs">
                            <div class="col-12" text-align="center">
                                <h5>Get All Clubs</h5>
                                <button type="button" class="btn btn-primary" onclick="get_all_clubs()">GET</button>
                                <div id="all-clubs-information"></div>
                            </div>
                        </div> <br>
                        <div class="row add-member-container">
                            <div class="col-12" text-align="center">
                                <h5>Add Member to club</h5>
                                <div class="add-member">
                                        <div class="form-group">
                                            <input type="number" class="form-control" id="member-club-id" placeholder="Club ID">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" id="member-id" placeholder="Enter Student ID of member to be added">
                                        </div>
                                        <button type="submit" class="btn btn-primary" onclick="add_member()">Add Member</button>
                                        <div id="add-member-response"></div>
                                </div>
                            </div>
                        </div><br>
                        <div class="row delete-club-container">
                            <div class="col-12" text-align="center">
                                <h5>Delete Club</h5>
                                <div class="delete-club">
                                        <div class="form-group">
                                            <input type="number" class="form-control" id="delete-club-id" placeholder="Club ID to be deleted">
                                        </div>
                                        <button type="submit" class="btn btn-primary" onclick="delete_club()">Delete Club</button>
                                        <div id="delete-club-response"></div>
                                </div>
                            </div>
                        </div><br>
                        <div class="row get-roles-container">
                            <div class="col-12" text-align="center">
                                <h5>Get Roles</h5>
                                <div class="get-roles">
                                        <button type="submit" class="btn btn-primary" onclick="get_roles()">Get Roles</button>
                                        <div id="get-roles-response"></div>
                                </div>
                            </div>
                        </div><br>
                    </div>
                    <div class="col-6" text-align="center">
                        <h5>Events</h5>
                        <div class="event-by-id">
                            <div class="row">
                                <div class="col-12">
                                    <div class="input-group mb-3">
                                        <input type="text" class="form-control" id="event-id" placeholder="Event ID" aria-label="Event ID" aria-describedby="basic-addon2">
                                        <div class="input-group-append">
                                          <button class="btn btn-primary" type="button" onclick="get_event_by_id(document.getElementById('event-id').value)">Search</button>
                                        </div>
                                      </div>
                                </div>
                            </div>
                            <div class="row" id="event-id-found" style="display:none;">
                                <div class="col-12">
                                    <div class="row" id="event-id-found-id">
                                    </div>
                                    <div class="row" id="event-id-found-name">
                                    </div>
                                    <div class="row" id="event-id-found-description">
                                    </div>
                                    <div class="row" id="event-id-found-location">
                                    </div>
                                    <div class="row" id="event-id-found-start">
                                    </div>
                                    <div class="row" id="event-id-found-end">
                                    </div>
                                    <div class="row" id="event-id-found-category">
                                    </div>
                                </div>
                            </div>
                            <div class="row" id="event-id-not-found" style="display:none;">
                                <div class="col-12">
                                    Event not found
                                </div>
                            </div>
                        </div> <br>
                        <h5>Create Event</h5>
                        <div class="create-event">
                            <div class="form-group">
                                <input type="text" class="form-control" id="create-event-name" placeholder="Enter event name">
                            </div>
                            <div class="form-group">
                                <input type="number" class="form-control" id="create-event-club-id" placeholder="Enter club id">
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" id="create-event-start-timestamp" placeholder="Enter event start timestamp">
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" id="create-event-end-timestamp" placeholder="Enter event end timestamp">
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" id="create-event-location" placeholder="Enter event location">
                            </div>
                            <div class="form-group">
                                <input type="number" class="form-control" id="create-event-max-registration" placeholder="Enter max registration">
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" id="create-event-description" placeholder="Enter event description">
                            </div>
                            <div class="form-group">
                                <input type="number" class="form-control" id="create-event-fee" placeholder="Enter event fee">
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" id="create-event-category" placeholder="Enter event category">
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" id="create-event-visibility" placeholder="Enter event visibility">
                            </div>
                            <button type="submit" class="btn btn-primary" onclick="create_event()">Create Event</button>
                            <div id="create-event-response" style="display:none;"></div>
                        </div> <br>
                        <div class="row get-all-events">
                            <div class="col-12" text-align="center">
                                <h5>Get All Events</h5>
                                <button type="button" class="btn btn-primary" onclick="get_all_events()">GET</button>
                                <div id="all-events-information"></div>
                            </div>
                        </div> <br>
                        <div class="row register-event-container">
                            <div class="col-12" text-align="center">
                                <h5>Register to an event</h5>
                                <div class="register-event">
                                        <div class="form-group">
                                            <input type="number" class="form-control" id="register-event-id" placeholder="Event ID">
                                        </div>

                                        <button type="submit" class="btn btn-primary" onclick="register_event()">Register to an Event</button>
                                        <div id="register-event-response"></div>
                                </div>
                            </div>
                        </div><br>

                        <div class="row get-all-registered-events">
                            <div class="col-12" text-align="center">
                                <h5>Get Registered Events</h5>
                                <div class="get-registered-events">
                                    <button type="submit" class="btn btn-primary" onclick="get_registered_events()">Get Registered Events</button>
                                    <div id="get-registered-events-response"></div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>

  <script>
      var login_email_id = "no id";
var global_url = "http://localhost:5000/";
var authtoken = "abc";

function onSignIn(googleUser) {
    console.log("here");
  var profile = googleUser.getBasicProfile();
  console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
  console.log('Name: ' + profile.getName());
  console.log('Image URL: ' + profile.getImageUrl());
  console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
    console.log(googleUser.getAuthResponse(true));
    student_login2(profile.getEmail(), googleUser.getAuthResponse(true));
}

function student_login2(email, authResponse){
    document.getElementById("information-container").style.display = "block"
    document.getElementById("login-form").innerHTML = "<h5>Welcome " + email + "</h5>"
    login_email_id = email;
    authtoken = "Bearer " + authResponse.access_token;
    console.log("Access Token");
    console.log(authtoken);
}

function student_login(email){
    var xhr = new XMLHttpRequest();
    var url = global_url + "student/" + email;
    xhr.open("GET", url, true);
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.setRequestHeader("Authorization", authtoken);
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            console.log(xhr.responseText);
            var json = JSON.parse(xhr.responseText);
            console.log(json)
            if (json != "Student does not exist"){
                document.getElementById("information-container").style.display = "block"
                document.getElementById("login-form").innerHTML = "<h5>Welcome " + email + "</h5>"
                login_email_id = email;
            }
            else{
                document.getElementById("login-form").innerHTML = "<h5>" + json + "</h5>"
            }
        }else{
            console.log("here");
        }
    };
    xhr.send();
}

function get_club_by_id(club_id){
    var xhr = new XMLHttpRequest();
    var url = global_url + "clubs/" + club_id;
    xhr.open("GET", url, true);
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.setRequestHeader("Authorization", authtoken);
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            console.log(xhr.responseText);
            var json = JSON.parse(xhr.responseText);
            console.log(json)
            if (json == null){
                document.getElementById("club-id-found").style.display = "none"
                document.getElementById("club-id-not-found").style.display = "inline"
            }else{
                document.getElementById("club-id-found").style.display = "inline"
                document.getElementById("club-id-not-found").style.display = "none"

                club_name = json.name;
                club_head = json.head;
                club_category = json.category;
                club_description = json.description;

                document.getElementById("club-id-found-id").innerHTML = "Club ID: " + club_id;
                document.getElementById("club-id-found-name").innerHTML = "Club Name: " + club_name;
                document.getElementById("club-id-found-head").innerHTML = "Club Head: " + club_head;
                document.getElementById("club-id-found-category").innerHTML = "Club Category: " + club_category;
                document.getElementById("club-id-found-description").innerHTML = "Club Description: " + club_description;
            }
        }else{
            console.log("here");
        }
    };
    xhr.send();
}

function create_club(){
    var xhr = new XMLHttpRequest();
    var url = global_url + "student/club";
    xhr.open("POST", url, true);
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.setRequestHeader("Authorization", authtoken);
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var json = JSON.parse(xhr.responseText);
            document.getElementById("create-club-response").style.display = "inline";
            document.getElementById("create-club-response").innerHTML = json;
        }else{
            var json = JSON.parse(xhr.responseText);
            document.getElementById("create-club-response").style.display = "inline";
            document.getElementById("create-club-response").innerHTML = json;
        }
    };
    var data = JSON.stringify({
        "club":{
            "name": document.getElementById("create-club-name").value,
            "head": document.getElementById("create-club-head").value,
            "category": document.getElementById("create-club-category").value,
            "description": document.getElementById("create-club-description").value,
        }
    });
    xhr.send(data);
}

function get_all_clubs(){
    var xhr = new XMLHttpRequest();
    var url = global_url + "clubs";
    xhr.open("GET", url, true);
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.setRequestHeader("Authorization", authtoken);
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var json = JSON.parse(xhr.responseText);
            console.log(json)
            if (json.length>0){
                var innerHTML = ""
                for (let i = 0; i < json.length; i++) {
                    innerHTML = innerHTML + `<div class="row">
                                        <div class="col-12">
                                        <div class="row">Club ID: `+json[i]._id+`</div>
                                        <div class="row">Club Name: `+json[i].name+`</div>
                                        <div class="row">Club Head: `+json[i].head+`</div>
                                        <div class="row">Club Category: `+json[i].category+`</div>
                                        <div class="row">Club Description: `+json[i].description+`</div>
                                    </div>
                                </div><br>`
                  }
                document.getElementById("all-clubs-information").innerHTML = innerHTML;
            }else{
                // No clubs found
                document.getElementById("all-clubs-information").innerHTML = "No Clubs in the database";
            }
        }else{
            console.log("here");
        }
    };
    xhr.send();
}

function add_member(){
    var xhr = new XMLHttpRequest();
    var url = global_url + "member/" + document.getElementById("member-club-id").value;
    xhr.open("PUT", url, true);
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.setRequestHeader("Authorization", authtoken);
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var json = xhr.responseText;
            console.log(json)
            document.getElementById("add-member-response").innerHTML = json;
        }else{
            console.log("here");
            var json = xhr.responseText;
            console.log(json)
            document.getElementById("add-member-response").innerHTML = json;
        }
    };
    var data = JSON.stringify({
        "student_email_id":document.getElementById("member-id").value
    })
    xhr.send(data);
}

function delete_club(){
    var xhr = new XMLHttpRequest();
    var url = global_url + "clubs/" + document.getElementById("delete-club-id").value;
    xhr.open("DELETE", url, true);
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.setRequestHeader("Authorization", authtoken);
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var json = xhr.responseText;
            console.log(json)
            document.getElementById("delete-club-response").innerHTML = json;
        }else{
            console.log("here");
            var json = xhr.responseText;
            console.log(json)
            document.getElementById("delete-club-response").innerHTML = json;
        }
    };
    xhr.send();
}

function get_roles(){
    var xhr = new XMLHttpRequest();
    var url = global_url + "student/get_roles";
    xhr.open("GET", url, true);
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.setRequestHeader("Authorization", authtoken);
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var json = JSON.parse(xhr.responseText);
            if (json.length>0){
                var innerHTML = ""
                for (let i = 0; i < json.length; i++) {
                    innerHTML = innerHTML + `<div class="row">
                                        <div class="col-12">
                                        <div class="row">Club ID: `+json[i].club_id+`</div>
                                        <div class="row">Role: `+json[i].role+`</div>
                                    </div>
                                </div><br>`
                  }
                document.getElementById("get-roles-response").innerHTML = innerHTML;
            }else{
                // No clubs found
                document.getElementById("get-roles-response").innerHTML = "Not registered in any clubs";
            }
        }else{
            console.log("here");
            var json = xhr.responseText;
            console.log(json)
            // document.getElementById("get-roles-response").innerHTML = json;
        }
    };
    xhr.send();
}

// EVENTS

function get_event_by_id(event_id){
    var xhr = new XMLHttpRequest();
    var url = global_url + "events/" + event_id;
    xhr.open("GET", url, true);
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.setRequestHeader("Authorization", authtoken);
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            console.log(xhr.responseText);
            var json = JSON.parse(xhr.responseText);
            console.log(json)
            if (json == null){
                document.getElementById("event-id-found").style.display = "none"
                document.getElementById("event-id-not-found").style.display = "inline"
            }else{
                document.getElementById("event-id-found").style.display = "inline"
                document.getElementById("event-id-not-found").style.display = "none"

                event_name = json.name;
                event_description = json.description;
                event_location = json.location;
                event_start = json.start_timestamp;
                event_end = json.end_timestamp;
                event_category = json.category;

                document.getElementById("event-id-found-id").innerHTML = "Event ID: " + event_id;
                document.getElementById("event-id-found-name").innerHTML = "Event Name: " + event_name;
                document.getElementById("event-id-found-description").innerHTML = "Event Description: " + event_description;
                document.getElementById("event-id-found-location").innerHTML = "Event Location: " + event_location;
                document.getElementById("event-id-found-start").innerHTML = "Event Start: " + event_start;
                document.getElementById("event-id-found-end").innerHTML = "Event End: " + event_end;
                document.getElementById("event-id-found-category").innerHTML = "Event Category: " + event_category;
            }
        }else{
            console.log("here");
        }
    };
    xhr.send();
}

function create_event(){
    var xhr = new XMLHttpRequest();
    var url = global_url + "/events";
    xhr.open("POST", url, true);
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.setRequestHeader("Authorization", authtoken);
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 201) {
            var json = xhr.responseText;
            console.log(json)
            document.getElementById("create-event-response").style.display = "inline";
            document.getElementById("create-event-response").innerHTML = json;
        }else{
            var json = xhr.responseText;
            console.log(json)
            document.getElementById("create-event-response").style.display = "inline";
            document.getElementById("create-event-response").innerHTML = json;
        }
    };
    var data = JSON.stringify({
        "event":{
            "name": document.getElementById("create-event-name").value,
            "club_id": parseInt(document.getElementById("create-event-club-id").value),
            "start_timestamp": document.getElementById("create-event-start-timestamp").value,
            "end_timestamp": document.getElementById("create-event-end-timestamp").value,
            "location": document.getElementById("create-event-location").value,
            "max_registration": parseInt(document.getElementById("create-event-max-registration").value),
            "description": document.getElementById("create-event-description").value,
            "fee": parseInt(document.getElementById("create-event-fee").value),
            "category": document.getElementById("create-event-category").value,
            "visibility": document.getElementById("create-event-visibility").value,

        }
    });
    xhr.send(data);
}

function get_all_events(){
    var xhr = new XMLHttpRequest();
    var url = global_url + "events";
    xhr.open("GET", url, true);
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.setRequestHeader("Authorization", authtoken);
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var json = JSON.parse(xhr.responseText);
            console.log(json)
            if (json.length>0){
                var innerHTML = ""
                for (let i = 0; i < json.length; i++) {
                    innerHTML = innerHTML + `<div class="row">
                                        <div class="col-12">
                                        <div class="row">Event ID: `+json[i]._id+`</div>
                                        <div class="row">Event Name: `+json[i].name+`</div>
                                        <div class="row">Event Description: `+json[i].description+`</div>
                                        <div class="row">Event Location: `+json[i].location+`</div>
                                        <div class="row">Event Start Timestamp: `+json[i].start_timestamp+`</div>
                                        <div class="row">Event End Timestamp: `+json[i].end_timestamp+`</div>
                                        <div class="row">Event Category: `+json[i].category+`</div>
                                        <div class="row">Event Visibility: `+json[i].visibility+`</div>
                                    </div>
                                </div><br>`
                  }
                document.getElementById("all-events-information").innerHTML = innerHTML;
            }else{
                // No events found
                document.getElementById("all-events-information").innerHTML = "No Events in the database";
            }
        }else{
            console.log("here");
        }
    };
    xhr.send();
}

function get_registered_events(student_email_id) {
    var xhr = new XMLHttpRequest();
    var url = global_url + "student/get_registered_events";
    xhr.open("GET", url, true);
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.setRequestHeader("Authorization", authtoken);
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var json = JSON.parse(xhr.responseText);
            if (json.length>0){
                var innerHTML = ""
                for (let i = 0; i < json.length; i++) {
                    innerHTML = innerHTML + `<div class="row">
                                        <div class="col-12">
                                        <div class="row">Event ID: `+json[i].event._id+`</div>
                                        <div class="row">Event Name: `+json[i].event.name+`</div>
                                        <div class="row">Event Description: `+json[i].event.description+`</div>
                                        <div class="row">Event Location: `+json[i].event.location+`</div>
                                        <div class="row">Event Start Timestamp: `+json[i].event.start_timestamp+`</div>
                                        <div class="row">Event End Timestamp: `+json[i].event.end_timestamp+`</div>
                                        <div class="row">Event Category: `+json[i].event.category+`</div>
                                    </div>
                                </div><br>`
                  }
                document.getElementById("get-registered-events-response").innerHTML = innerHTML;
            }else{
                // No events found
                document.getElementById("get-registered-events-response").innerHTML = "Not registered in any event";
            }
        }else{
            console.log("here");
            var json = xhr.responseText;
            console.log(json)
        }
    };
    xhr.send();
}

function register_event(){
    var xhr = new XMLHttpRequest();
    var url = global_url + "student/register_event/" + document.getElementById("register-event-id").value;
    xhr.open("POST", url, true);
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.setRequestHeader("Authorization", authtoken);
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var json = xhr.responseText;
            console.log(json)
            document.getElementById("register-event-response").innerHTML = json;
        }else{
            console.log("here");
            var json = xhr.responseText;
            console.log(json)
            document.getElementById("register-event-response").innerHTML = json;
        }
    };
    xhr.send();
}
  </script>

  </body>
</html>
